pipeline {
    agent any

    stages {
        stage('Run SEO Content Script') {
            steps {
                withCredentials([string(credentialsId: 'GEMINI_API_KEY', variable: 'GEMINI_KEY')]) {
                    sh """
                    pip3 install google-generativeai
                    python3 script.py --key $GEMINI_KEY
                    """
                }
            }
        }
    }

    post {
        success {
            archiveArtifacts artifacts: 'output.json', onlyIfSuccessful: true
            echo "DONE! 175 content generated."
        }
    }
}
